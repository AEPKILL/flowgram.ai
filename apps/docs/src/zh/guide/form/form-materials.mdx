import { PackageManagerTabs } from '@theme';
import { MaterialDisplay } from '../../../../components/materials';

# 官方表单物料

## 如何使用？

详见：[物料快速入门](/guide/materials/introduction.html)

## 当前支持的 Component 物料

文档已迁移到 [组件](/guide/materials/components/type-selector.html)

## 当前支持的 Effect 物料

### provideBatchInput

<MaterialDisplay
  imgs={[{ src: '/materials/provide-batch-input.png', caption: 'item 的类型会自动根据前置类型联动推导' }]}
  filePath="effects/provide-batch-input/index.ts"
  exportName="provideBatchInputEffect"
>
  provideBatchInputEffect 用于配置循环批处理输入推导，会根据输入自动推导出两个变量：
  - item：根据输入变量数组类型自动推导，代表循环的每一项
  - index：数字类型，代表循环第几次
</MaterialDisplay>

### autoRenameRef

<MaterialDisplay
  imgs={[{ src: '/materials/auto-rename-ref.gif', caption: 'query 变量名变化时，自动重命名下游 inputs 中的引用' }]}
  filePath="effects/auto-rename-ref/index.ts"
  exportName="autoRenameRefEffect"
>
  当前置输出变量名发生变化时:
  - 表单项中所有的对该变量的引用，自动重命名
</MaterialDisplay>

### syncVariableTitle

<MaterialDisplay
  imgs={[{ src: '/materials/sync-variable-title.gif'  }]}
  filePath="effects/sync-variable-title/index.ts"
  exportName="syncVariableTitle"
>
  变量系统中节点名自动联动变化
</MaterialDisplay>

### provideJsonSchemaOutputs

<MaterialDisplay
  imgs={[{ src: '/materials/json-schema-editor.png' }]}
  filePath="effects/provide-json-schema-outputs/index.ts"
  exportName="provideJsonSchemaOutputs"
>
  节点 JsonSchema 同步到变量系统节点输出，使节点下游可以选择
</MaterialDisplay>

## 当前支持的 FormPlugin 物料

### batch-outputs-plugin

<MaterialDisplay
  imgs={[
    { src: '/materials/batch-outputs-plugin-1.png', caption: '插件限制循环作用域只能引用循环体内节点的变量' },
    { src: '/materials/batch-outputs-plugin-2.png', caption: '下游节点自动根据进行推导' }
  ]}
  filePath="form-plugins/batch-outputs-plugin/index.ts"
  exportName="createBatchOutputsFormPlugin"
>
  循环输出插件，需要配置 `BatchOutputs` 物料使用

  ```typescript
  const formMeta = {
    plugins: [createBatchOutputsFormPlugin({ outputKey: 'loopOutputs' })],
  }
  ```
</MaterialDisplay>


### infer-inputs-plugin

<MaterialDisplay
  imgs={[
    { src: '/materials/infer-inputs-plugin.png', caption: 'inputs 为 inputsValues 的 JsonSchema 类型' },
  ]}
  filePath="form-plugins/infer-inputs-plugin/index.ts"
  exportName="inferInputsPlugin"
>
  传到后端时，基于变量引擎自动计算出 inputsValues 的 JsonSchema 类型

  ```typescript
  const formMeta = {
    plugins: [
      // headers 存储 headersValues 的类型定义
      createInferInputsPlugin({ sourceKey: 'headersValues', targetKey: 'headers' }),
      // params 存储 paramsValues 的类型定义
      createInferInputsPlugin({ sourceKey: 'paramsValues', targetKey: 'params' }),
    ],
  }
  ```
</MaterialDisplay>
